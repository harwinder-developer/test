/*!  1.6.6 2018-09-17 16:19 */
CHARITABLE_ADMIN=window.CHARITABLE_ADMIN||{},function(a,b){if(b.fn.datepicker){var c=function(a){this.$el=a,options={dateFormat:"MM d, yy",minDate:this.$el.data("min-date")||"",beforeShow:function(a,c){b("#ui-datepicker-div").addClass("charitable-datepicker-table")}},this.$el.datepicker(options),this.$el.data("date")&&this.$el.datepicker("setDate",this.$el.data("date")),this.$el.data("min-date")&&this.$el.datepicker("option","minDate",this.$el.data("min-date"))};a.Datepicker=c}}(CHARITABLE_ADMIN,jQuery),function(a,b){var c=function(a){var c=[];show_setting=function(a,b){var c,d="!"===a[0],e=d?a.slice(1):a;return c="checked"===e?b.is(":checked"):"selected"===e?b.selected():b.val()===e,d?!c:c},toggle_setting=function(a,b){var c=function(a){var b=a.parents("tr");return b.length?b.first():a}(a),d=get_setting_value(a),e=show_setting(d,b);c.toggle(e)},get_setting_value=function(a){var b=a.data("trigger-value");return"undefined"==typeof b&&(b=a.data("show-only-if-value")),b},toggle_options=function(a,c){var d,e=c.val(),f=a.data("trigger-value");("radio"!==c.attr("type")||c.prop("checked"))&&f.hasOwnProperty(e)&&(d=f[e],a.find("input").each(function(){var a=b(this),c=!(a.val()in d);c&&a.prop("checked",!1),a.prop("disabled",c).trigger("change")}))},get_trigger_id=function(a){var b=a.data("trigger-key");return"undefined"==typeof b&&(b="#"+a.data("show-only-if-key")),b},get_trigger=function(a){return b("#"===a[0]?a:"[name="+a+"]")},get_change_type=function(a){var b=a.data("trigger-change-type");return"undefined"==typeof b&&(b="visibility"),b},on_change=function(){var a,d=b(this),e=d.data("trigger_idx");for(idx in e)if(e.hasOwnProperty(idx)){a=c[idx].settings;for(setting_key in a)if(a.hasOwnProperty(setting_key)){var f=a[setting_key],g=get_change_type(f);"visibility"===g?toggle_setting(f,d):"options"===g&&toggle_options(f,d)}}},this.$el=a;var d=0;this.$el.find("[data-trigger-key],[data-show-only-if-key]").each(function(){var a=b(this),e=get_trigger_id(a);c[e];"undefined"==typeof c[e]&&(c[d]={trigger_id:e,settings:[]}),c[d].settings.push(a),d+=1});for(d in c)if(c.hasOwnProperty(d)){var e=get_trigger(c[d].trigger_id),f=e.data("trigger_idx");"undefined"==typeof f&&(f=[]),f.push(d),e.data("trigger_idx",f),e.on("change",on_change),e.trigger("change")}};a.Settings=c}(CHARITABLE_ADMIN,jQuery),function(a){var b=function(){a("#campaign_end_date").on("change",function(){var b=a(this),c=b.val(),d=b.siblings(".charitable-end-time"),e=b.siblings("#campaign_end_time");""!==c&&c?(d.text("@ 23:59 PM").show(),e.val("23:59:59")):(d.hide(),e.val(0))})},c=function(){a("[data-charitable-action]").on("click",function(b){var c=a(this).data("charitable-args")||{},d="charitable-"+a(this).data("charitable-action");return a.post(ajaxurl,{action:d,data:c},function(a){console.log("Response: "+a)}),!1})},d=function(){a("[data-charitable-toggle]").on("click",function(b){var c=a(this).data("charitable-toggle"),d=a(this).attr("data-charitable-toggle-text");return d&&d.length&&(a(this).attr("data-charitable-toggle-text",a(this).text()),a(this).text(d)),a("#"+c).toggle(),!1})},e=function(){var b=a("#charitable-campaign-advanced-metabox");b.tabs();var c=b.find(".charitable-tabs").height();b.find(".ui-tabs-panel").each(function(){a(this).css("min-height",c)})},f=function(){var b=a("#campaign_allow_custom_donations"),c=a(".charitable-campaign-suggested-donations tbody tr:not(.to-copy)"),d=c.length>1||!1===c.first().hasClass("no-suggested-amounts");b.prop("disabled",!d),d||b.prop("checked",!0)},g=function(){a(".charitable-campaign-suggested-donations tbody").sortable({items:"tr:not(.to-copy)",handle:".handle",stop:function(a,b){j()}})},h=function(a){var b=a.closest(".charitable-campaign-suggested-donations").find("tbody"),c=b.find("tr.to-copy").clone().removeClass("to-copy hidden");b.find(".no-suggested-amounts").hide(),b.append(c),j(),f()},i=function(a){console.log(a),a.closest("tr").remove();var b=a.closest(".charitable-campaign-suggested-donations").find("tbody");1==b.find("tr:not(.to-copy)").length&&b.find(".no-suggested-amounts").removeClass("hidden").show(),j(),f()},j=function(){a(".charitable-campaign-suggested-donations tbody").each(function(){a(this).children("tr").not(".no-suggested-amounts .to-copy").each(function(b){a(this).data("index",b),a(this).find("input").each(function(a){this.name=this.name.replace(/(\[\d\])/,"["+b+"]")})})})},k=function(){var b=a("#charitable_dashboard_donations");b.length&&a.ajax({type:"GET",data:{action:"charitable_load_dashboard_donations_widget"},url:ajaxurl,success:function(a){b.find(".inside").html(a)}})},l=function(){var b,c,d,e=a(".charitable-actions-form-wrapper");e.length&&(b=e.find(".charitable-action-select"),c=e.find(".charitable-actions-submit"),d=c.find("button"),c.hide(),b.on("change",function(){var f=b.val(),g=b.find("option:selected").data("button-text");return""===f?void c.hide():(e.find(".charitable-action-fields").each(function(){var b=a(this);b.toggle(f===b.data("type"))}),g?d.text(g):d.text(d.prop("title")),void c.show())}))},m=function(){if("undefined"!=typeof accounting){var b=function(a){return Math.abs(parseFloat(accounting.unformat(a,CHARITABLE.currency_format_decimal_sep)))},c=function(a){return accounting.formatMoney(a,{symbol:"",decimal:CHARITABLE.currency_format_decimal_sep,thousand:CHARITABLE.currency_format_thousand_sep,precision:CHARITABLE.currency_format_num_decimals,format:CHARITABLE.currency_format}).trim()};a("body").on("change",".currency-input",function(){var d=b(a(this).val());a.trim(d)>0&&a(this).val(c(d))}),a(".currency-input").trigger("change")}};a(document).ready(function(){CHARITABLE_ADMIN.Datepicker&&a(".charitable-datepicker").each(function(){CHARITABLE_ADMIN.Datepicker(a(this))}),a("#charitable-settings, body.post-type-campaign form#post, body.post-type-donation form#post").each(function(){CHARITABLE_ADMIN.Settings(a(this))}),a("body.post-type-campaign .handlediv, body.post-type-donation .handlediv").remove(),a("body.post-type-campaign .hndle, body.post-type-donation .hndle").removeClass("hndle ui-sortable-handle").addClass("postbox-title"),e(),g(),f(),c(),d(),k(),b(),l(),m(),a("[data-charitable-add-row]").on("click",function(){var b=a(this).data("charitable-add-row");return"suggested-amount"===b&&h(a(this)),!1}),a(".charitable-campaign-suggested-donations").on("click",".charitable-delete-row",function(){return console.log("clicked"),i(a(this)),!1}),a("body").on("click","[data-campaign-benefactor-delete]",function(){var b=a(this).parents(".charitable-benefactor"),c={action:"charitable_delete_benefactor",benefactor_id:a(this).data("campaign-benefactor-delete"),nonce:a(this).data("nonce")};return a.ajax({type:"POST",data:c,dataType:"json",url:ajaxurl,xhrFields:{withCredentials:!0},success:function(a){a.deleted&&b.remove()}}).fail(function(a){window.console&&window.console.log&&(console.log("failture"),console.log(a))}),!1}),a("#change-donation-status").on("change",function(){a(this).parents("form").submit()})})}(jQuery);